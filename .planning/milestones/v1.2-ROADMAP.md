# Milestone v1.2: Org CRM & Events

**Status:** ✅ SHIPPED 2026-01-19
**Phases:** 11-16
**Total Plans:** 20

## Overview

Transform ASTN into a self-maintaining CRM for field-building orgs — members discover local hubs, attend events, and orgs get a live view of their community without chasing people to update spreadsheets.

## Phases

### Phase 11: Org Discovery

**Goal**: Users can discover and join relevant organizations
**Depends on**: Phase 10 (existing org infrastructure)
**Requirements**: ORG-01, ORG-02, ORG-03
**Plans**: 3 plans

Plans:

- [x] 11-01-PLAN.md — Schema foundation + discovery backend
- [x] 11-02-PLAN.md — Dashboard suggestions + settings UI
- [x] 11-03-PLAN.md — Browse page with map

**Success Criteria:**

1. User sees geography-based org suggestions on their dashboard
2. User can browse and search orgs with location filtering
3. User can join an org via shareable invite link
4. Location-based suggestions respect user privacy preferences

**Completed:** 2026-01-19

---

### Phase 12: Event Management

**Goal**: Orgs can connect lu.ma calendars and users can view events on dashboard
**Depends on**: Phase 11
**Requirements**: EVT-02, EVT-03 (EVT-01 via lu.ma, EVT-04 via lu.ma link-out)
**Plans**: 3 plans

Plans:

- [x] 12-01-PLAN.md — Schema + lu.ma sync backend
- [x] 12-02-PLAN.md — Org events page + admin settings
- [x] 12-03-PLAN.md — Dashboard events section

**Success Criteria:**

1. Org admin can configure lu.ma calendar integration
2. Org has a public event listing page showing lu.ma embed
3. User can see events from their orgs on their dashboard
4. User can RSVP to events via lu.ma link-out

**Completed:** 2026-01-19

---

### Phase 13: Event Notifications

**Goal**: Users receive configurable event notifications and reminders
**Depends on**: Phase 12
**Requirements**: EVT-05, EVT-06, EVT-07
**Plans**: 3 plans

Plans:

- [x] 13-01-PLAN.md — Schema + event notification preferences UI
- [x] 13-02-PLAN.md — Event digest emails + real-time notifications
- [x] 13-03-PLAN.md — In-app notification center + event reminders

**Success Criteria:**

1. User can configure event notification frequency (all / digest / none)
2. User can mute specific orgs from event notifications
3. User can set reminder preferences (1 day before, 1 hour before, none)
4. System sends notifications according to user preferences
5. Notifications batch properly to avoid fatigue

**Completed:** 2026-01-19

---

### Phase 14: Attendance Tracking

**Goal**: Users confirm event attendance and provide feedback
**Depends on**: Phase 13
**Requirements**: ATT-01, ATT-02, ATT-03, ATT-04, ATT-05
**Plans**: 3 plans

Plans:

- [x] 14-01-PLAN.md — Schema + backend + post-event scheduler
- [x] 14-02-PLAN.md — UI components + notification integration
- [x] 14-03-PLAN.md — Attendance history + privacy settings

**Success Criteria:**

1. User receives post-event "Did you attend?" notification within 2-4 hours
2. User can confirm attendance with one tap
3. User can view their attendance history on their profile
4. User can optionally provide feedback after attending (star rating + text)
5. User can dismiss or defer attendance prompts

**Completed:** 2026-01-19

---

### Phase 15: Engagement Scoring

**Goal**: System computes explainable engagement levels with admin override
**Depends on**: Phase 14 (needs attendance data)
**Requirements**: ENG-01, ENG-02, ENG-03
**Plans**: 2 plans

Plans:

- [x] 15-01-PLAN.md — Schema + backend (LLM classification, daily cron)
- [x] 15-02-PLAN.md — Admin UI (engagement badges, override dialog)

**Success Criteria:**

1. System computes engagement levels via LLM (Highly Engaged / Moderate / At Risk / New / Inactive)
2. Engagement scores include natural language explanations showing input signals
3. Org admin can override engagement level with notes
4. Override history is preserved for audit

**Completed:** 2026-01-19

---

### Phase 16: CRM Dashboard & Programs

**Goal**: Org admins have full CRM visibility with program tracking
**Depends on**: Phase 15
**Requirements**: CRM-01, CRM-02, CRM-03, CRM-04, CRM-05, CRM-06, PRG-01, PRG-02, PRG-03
**Plans**: 6 plans

Plans:

- [x] 16-01-PLAN.md — Enhanced stats backend (time range, engagement/career distributions)
- [x] 16-02-PLAN.md — Member directory filters (engagement, skills, location, pagination)
- [x] 16-03-PLAN.md — Member profile backend (privacy-controlled queries, history)
- [x] 16-04-PLAN.md — Programs schema and backend (CRUD, enrollment, completion)
- [x] 16-05-PLAN.md — Member profile page UI (attendance/engagement history, export)
- [x] 16-06-PLAN.md — Programs admin UI (list, create, participant management)

**Success Criteria:**

1. Org admin can view filterable member directory
2. Org admin can view member profiles (privacy-controlled)
3. Org admin can see basic community stats (member count, career breakdown)
4. Org admin can export member data as CSV
5. Org admin can see per-member attendance records and engagement history
6. Org admin can define org-specific programs (reading groups, fellowships, etc.)
7. Org admin can track member participation in programs
8. Attendance can be tracked granularly by program

**Completed:** 2026-01-19

---

## Milestone Summary

**Key Decisions:**

- Location discovery is opt-in (locationDiscoverable defaults to false)
- Lu.ma API key is per-calendar, implicitly identifies which calendar to fetch
- Weekly digest as default event notification frequency
- 10-minute cron with 10-20 minute detection window for ended events
- 2-prompt max limit for attendance prompts (no follow-ups after prompt 2)
- Claude Haiku for cost-effective engagement classification
- Engagement levels use friendly names (Active, Moderate, At Risk)
- Profile name always visible to admins for identification
- Soft delete via archiving for programs (status: archived)

**Tech Debt:**

- `@ts-nocheck` in batchActions.ts (Convex action type inference workaround)
- `linkedEventIds` auto-attendance not implemented (documented as future work)

**Issues Resolved:**

- Privacy consent UX for location - implemented as opt-in toggle
- Notification fatigue addressed via batching, budgets, and granular preferences
- CRM performance addressed via server-side pagination, not real-time subscriptions

---

_Archived: 2026-01-19 as part of v1.2 milestone completion_
_For current project status, see .planning/ROADMAP.md_
