---
phase: 01-foundation-opportunities
plan: 04
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - src/routes/opportunities/index.tsx
  - src/routes/opportunities/$id.tsx
  - src/routes/_public.tsx
  - src/components/opportunities/opportunity-card.tsx
  - src/components/opportunities/opportunity-list.tsx
  - src/components/opportunities/opportunity-filters.tsx
  - src/components/opportunities/opportunity-detail.tsx
autonomous: false

must_haves:
  truths:
    - "User can view list of opportunities at /opportunities"
    - "User can filter by role type, location/remote, and search keywords"
    - "Filter state is reflected in URL for shareable links"
    - "User can click opportunity to view full details"
    - "Detail page shows all opportunity information"
    - "Freshness indicator shows when opportunity was last verified"
  artifacts:
    - path: "src/routes/opportunities/index.tsx"
      provides: "Opportunity list page with filters"
      min_lines: 40
    - path: "src/routes/opportunities/$id.tsx"
      provides: "Opportunity detail page"
      min_lines: 50
    - path: "src/components/opportunities/opportunity-card.tsx"
      provides: "Card component for list display"
      min_lines: 30
    - path: "src/components/opportunities/opportunity-filters.tsx"
      provides: "Filter bar component"
      min_lines: 50
  key_links:
    - from: "src/routes/opportunities/index.tsx"
      to: "convex/opportunities.ts"
      via: "useQuery hook"
      pattern: "useQuery.*api\\.opportunities\\.(list|search)"
    - from: "src/components/opportunities/opportunity-filters.tsx"
      to: "URL params"
      via: "useSearch and useNavigate"
      pattern: "useSearch|useNavigate|Route\\.useSearch"
---

<objective>
Build the public opportunity browsing interface with search, filters, and detail views.

Purpose: Enable users to discover and explore opportunities (OPPS-01, OPPS-02, OPPS-06) with a Lyra aesthetic (boxy/sharp, mono fonts) and tasteful motion.

Output: Working /opportunities page with filtering, search, and detail view with shareable URLs. Dynamic feel with staggered reveals and smooth hover states.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-opportunities/CONTEXT.md
@.planning/phases/01-foundation-opportunities/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create opportunity card and list components with Lyra styling</name>
  <files>
    src/components/opportunities/opportunity-card.tsx
    src/components/opportunities/opportunity-list.tsx
  </files>
  <action>
1. Create `src/components/opportunities/opportunity-card.tsx`:

Lyra aesthetic: Boxy/sharp edges, mono fonts for technical feel. Tasteful motion with hover transforms and smooth transitions.

```typescript
import { Link } from "@tanstack/react-router";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { MapPin, Building2, Clock, Banknote } from "lucide-react";
import { formatDistanceToNow } from "date-fns";
import { Id } from "../../../convex/_generated/dataModel";

type Opportunity = {
  _id: Id<"opportunities">;
  title: string;
  organization: string;
  organizationLogoUrl?: string;
  location: string;
  isRemote: boolean;
  roleType: string;
  salaryRange?: string;
  deadline?: number;
  lastVerified: number;
};

const ROLE_TYPE_COLORS: Record<string, string> = {
  research: "bg-purple-100 text-purple-800 border-purple-200",
  engineering: "bg-blue-100 text-blue-800 border-blue-200",
  operations: "bg-green-100 text-green-800 border-green-200",
  policy: "bg-amber-100 text-amber-800 border-amber-200",
  other: "bg-slate-100 text-slate-800 border-slate-200",
};

export function OpportunityCard({
  opportunity,
  index = 0
}: {
  opportunity: Opportunity;
  index?: number;
}) {
  const roleColorClass = ROLE_TYPE_COLORS[opportunity.roleType] || ROLE_TYPE_COLORS.other;

  return (
    <Link to="/opportunities/$id" params={{ id: opportunity._id }}>
      <Card
        className="
          hover:shadow-lg transition-all duration-200 cursor-pointer
          border-slate-200 hover:border-primary/30
          hover:-translate-y-0.5 active:translate-y-0
          rounded-none sm:rounded-sm
        "
        style={{
          animationDelay: `${index * 50}ms`,
        }}
      >
        <CardContent className="p-5">
          <div className="flex gap-4">
            {/* Organization Logo - sharp corners for Lyra */}
            <div className="flex-shrink-0">
              {opportunity.organizationLogoUrl ? (
                <img
                  src={opportunity.organizationLogoUrl}
                  alt={`${opportunity.organization} logo`}
                  className="w-12 h-12 rounded-sm object-contain bg-slate-50 border border-slate-100"
                />
              ) : (
                <div className="w-12 h-12 rounded-sm bg-slate-100 flex items-center justify-center border border-slate-200">
                  <Building2 className="w-6 h-6 text-slate-400" />
                </div>
              )}
            </div>

            {/* Content */}
            <div className="flex-1 min-w-0">
              <div className="flex items-start justify-between gap-2">
                <div>
                  <h3 className="font-semibold text-slate-900 leading-tight font-mono tracking-tight">
                    {opportunity.title}
                  </h3>
                  <p className="text-sm text-slate-600 mt-0.5">
                    {opportunity.organization}
                  </p>
                </div>
                <Badge className={`${roleColorClass} capitalize flex-shrink-0 rounded-sm border`}>
                  {opportunity.roleType}
                </Badge>
              </div>

              <div className="flex flex-wrap items-center gap-3 mt-3 text-sm text-slate-500">
                <span className="flex items-center gap-1">
                  <MapPin className="w-3.5 h-3.5" />
                  {opportunity.location}
                  {opportunity.isRemote && (
                    <Badge variant="outline" className="ml-1 text-xs py-0 rounded-sm">
                      Remote
                    </Badge>
                  )}
                </span>

                {opportunity.salaryRange && (
                  <span className="flex items-center gap-1">
                    <Banknote className="w-3.5 h-3.5" />
                    {opportunity.salaryRange}
                  </span>
                )}

                {opportunity.deadline && (
                  <span className="flex items-center gap-1">
                    <Clock className="w-3.5 h-3.5" />
                    Closes {formatDistanceToNow(opportunity.deadline, { addSuffix: true })}
                  </span>
                )}
              </div>

              {/* Freshness indicator (OPPS-06) */}
              <p className="text-xs text-slate-400 mt-2 font-mono">
                Last verified: {formatDistanceToNow(opportunity.lastVerified, { addSuffix: true })}
              </p>
            </div>
          </div>
        </CardContent>
      </Card>
    </Link>
  );
}
```

2. Create `src/components/opportunities/opportunity-list.tsx`:

Staggered reveal animation on page load for dynamic feel.

```typescript
import { OpportunityCard } from "./opportunity-card";
import { Empty } from "@/components/ui/empty";
import { Spinner } from "@/components/ui/spinner";
import { Id } from "../../../convex/_generated/dataModel";

type Opportunity = {
  _id: Id<"opportunities">;
  title: string;
  organization: string;
  organizationLogoUrl?: string;
  location: string;
  isRemote: boolean;
  roleType: string;
  salaryRange?: string;
  deadline?: number;
  lastVerified: number;
};

export function OpportunityList({
  opportunities,
  isLoading,
}: {
  opportunities?: Opportunity[];
  isLoading: boolean;
}) {
  if (isLoading) {
    return (
      <div className="flex flex-col items-center justify-center py-16 gap-4">
        <Spinner className="w-6 h-6" />
        <p className="text-sm text-slate-500 font-mono">Loading opportunities...</p>
      </div>
    );
  }

  if (!opportunities || opportunities.length === 0) {
    return (
      <Empty className="py-16">
        <Empty.Icon />
        <Empty.Title>No opportunities found</Empty.Title>
        <Empty.Description>
          Try adjusting your filters or check back later.
        </Empty.Description>
      </Empty>
    );
  }

  return (
    <div className="space-y-4">
      {opportunities.map((opportunity, index) => (
        <div
          key={opportunity._id}
          className="animate-in fade-in slide-in-from-bottom-2 duration-300"
          style={{ animationDelay: `${index * 50}ms`, animationFillMode: 'backwards' }}
        >
          <OpportunityCard opportunity={opportunity} index={index} />
        </div>
      ))}
    </div>
  );
}
```
  </action>
  <verify>
Files exist in `src/components/opportunities/`
No TypeScript errors in the files.
Cards have sharp corners (rounded-sm), mono font for titles, hover lift effect.
List shows staggered animation on load.
  </verify>
  <done>Card and list components created with Lyra styling (boxy/sharp, mono fonts) and staggered reveal animations.</done>
</task>

<task type="auto">
  <name>Task 2: Create filter bar with URL sync</name>
  <files>
    src/components/opportunities/opportunity-filters.tsx
  </files>
  <action>
Per CONTEXT.md: "Filter Layout: Top bar (inline) - Horizontal filter bar above results. Filter Behavior: URL-synced instant - Results update immediately as filters change. Filter state reflected in URL for sharing/bookmarking."

Create `src/components/opportunities/opportunity-filters.tsx`:

```typescript
import { useNavigate, useSearch } from "@tanstack/react-router";
import { useCallback } from "react";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Search, X } from "lucide-react";

const ROLE_TYPES = [
  { value: "all", label: "All Roles" },
  { value: "research", label: "Research" },
  { value: "engineering", label: "Engineering" },
  { value: "operations", label: "Operations" },
  { value: "policy", label: "Policy" },
  { value: "other", label: "Other" },
];

const LOCATION_OPTIONS = [
  { value: "all", label: "All Locations" },
  { value: "remote", label: "Remote Only" },
  { value: "onsite", label: "On-site Only" },
];

// Search params type for the opportunities route
type OpportunitySearchParams = {
  role?: string;
  location?: string;
  q?: string;
};

export function OpportunityFilters() {
  const navigate = useNavigate();
  const search = useSearch({ from: "/opportunities/" }) as OpportunitySearchParams;

  const roleType = search.role || "all";
  const locationFilter = search.location || "all";
  const searchTerm = search.q || "";

  const updateFilter = useCallback(
    (key: keyof OpportunitySearchParams, value: string) => {
      navigate({
        to: "/opportunities",
        search: (prev) => {
          const newSearch = { ...prev };
          if (value === "" || value === "all") {
            delete newSearch[key];
          } else {
            newSearch[key] = value;
          }
          return newSearch;
        },
      });
    },
    [navigate]
  );

  const clearFilters = () => {
    navigate({
      to: "/opportunities",
      search: {},
    });
  };

  const hasActiveFilters =
    roleType !== "all" || locationFilter !== "all" || searchTerm !== "";

  return (
    <div className="bg-white border-b border-slate-200 sticky top-0 z-10">
      <div className="container mx-auto px-4 py-4">
        <div className="flex flex-wrap items-center gap-3">
          {/* Search - Secondary per CONTEXT.md */}
          <div className="relative w-64">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400" />
            <Input
              type="search"
              placeholder="Search opportunities..."
              value={searchTerm}
              onChange={(e) => updateFilter("q", e.target.value)}
              className="pl-9"
            />
          </div>

          {/* Role Type Filter */}
          <Select value={roleType} onValueChange={(v) => updateFilter("role", v)}>
            <SelectTrigger className="w-40">
              <SelectValue placeholder="Role Type" />
            </SelectTrigger>
            <SelectContent>
              {ROLE_TYPES.map((type) => (
                <SelectItem key={type.value} value={type.value}>
                  {type.label}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>

          {/* Location/Remote Filter */}
          <Select
            value={locationFilter}
            onValueChange={(v) => updateFilter("location", v)}
          >
            <SelectTrigger className="w-40">
              <SelectValue placeholder="Location" />
            </SelectTrigger>
            <SelectContent>
              {LOCATION_OPTIONS.map((opt) => (
                <SelectItem key={opt.value} value={opt.value}>
                  {opt.label}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>

          {/* Clear Filters */}
          {hasActiveFilters && (
            <Button
              variant="ghost"
              size="sm"
              onClick={clearFilters}
              className="text-slate-500"
            >
              <X className="w-4 h-4 mr-1" />
              Clear
            </Button>
          )}
        </div>
      </div>
    </div>
  );
}
```
  </action>
  <verify>
File exists: `src/components/opportunities/opportunity-filters.tsx`
No TypeScript errors.
  </verify>
  <done>Filter bar with URL sync ready. Filters are primary, search is secondary per context.</done>
</task>

<task type="auto">
  <name>Task 3: Create opportunities list page</name>
  <files>
    src/routes/_public.tsx
    src/routes/opportunities/index.tsx
  </files>
  <action>
1. Create public pathless layout route at `src/routes/_public.tsx`:

This is a pathless layout that wraps public routes without affecting the URL structure.

```typescript
import { createFileRoute, Outlet, Link } from "@tanstack/react-router";
import { Button } from "@/components/ui/button";

export const Route = createFileRoute("/_public")({
  component: PublicLayout,
});

function PublicLayout() {
  return (
    <div className="min-h-screen bg-slate-50">
      <header className="border-b bg-white">
        <div className="container mx-auto px-4 py-4 flex items-center justify-between">
          <Link to="/" className="font-semibold text-slate-900">
            AI Safety Talent Network
          </Link>
          <nav className="flex items-center gap-4">
            <Link
              to="/opportunities"
              className="text-sm text-slate-600 hover:text-slate-900 [&.active]:text-slate-900 [&.active]:font-medium"
            >
              Opportunities
            </Link>
            <Button size="sm" variant="outline" asChild>
              <Link to="/admin">Admin</Link>
            </Button>
          </nav>
        </div>
      </header>
      <Outlet />
    </div>
  );
}
```

2. Create opportunities list page at `src/routes/opportunities/index.tsx`:

```typescript
import { createFileRoute } from "@tanstack/react-router";
import { useQuery } from "convex/react";
import { api } from "../../../convex/_generated/api";
import { OpportunityFilters } from "@/components/opportunities/opportunity-filters";
import { OpportunityList } from "@/components/opportunities/opportunity-list";

// Define search params schema for this route
type OpportunitySearchParams = {
  role?: string;
  location?: string;
  q?: string;
};

export const Route = createFileRoute("/opportunities/")({
  validateSearch: (search: Record<string, unknown>): OpportunitySearchParams => {
    return {
      role: search.role as string | undefined,
      location: search.location as string | undefined,
      q: search.q as string | undefined,
    };
  },
  component: OpportunitiesPage,
});

function OpportunitiesPage() {
  const { role: roleType, location: locationFilter, q: searchTerm } = Route.useSearch();

  // Determine which query to use based on filters
  const isRemote =
    locationFilter === "remote"
      ? true
      : locationFilter === "onsite"
        ? false
        : undefined;

  // Use search query if there's a search term, otherwise use list query
  const searchResults = useQuery(
    api.opportunities.search,
    searchTerm
      ? {
          searchTerm,
          roleType: roleType && roleType !== "all" ? roleType : undefined,
          isRemote,
          limit: 50,
        }
      : "skip"
  );

  const listResults = useQuery(
    api.opportunities.list,
    !searchTerm
      ? {
          roleType: roleType && roleType !== "all" ? roleType : undefined,
          isRemote,
          limit: 50,
        }
      : "skip"
  );

  const opportunities = searchTerm ? searchResults : listResults;
  const isLoading = opportunities === undefined;

  return (
    <>
      <OpportunityFilters />
      <main className="container mx-auto px-4 py-8">
        <div className="mb-6">
          <h1 className="text-2xl font-bold text-slate-900">Opportunities</h1>
          {opportunities && (
            <p className="text-sm text-slate-600 mt-1">
              {opportunities.length} opportunity{opportunities.length !== 1 ? "ies" : "y"} found
            </p>
          )}
        </div>
        <OpportunityList opportunities={opportunities} isLoading={isLoading} />
      </main>
    </>
  );
}
```
  </action>
  <verify>
Visit http://localhost:5173/opportunities - shows list (may be empty until sync runs).
Filter by role type - URL updates, results filter.
Search for a term - URL updates, results filter.
  </verify>
  <done>Opportunities list page with filtering and URL sync.</done>
</task>

<task type="auto">
  <name>Task 4: Create opportunity detail page</name>
  <files>
    src/components/opportunities/opportunity-detail.tsx
    src/routes/opportunities/$id.tsx
  </files>
  <action>
Per CONTEXT.md: "Detail View: Full page navigation - Clicking an opportunity navigates to dedicated page. Complete information, apply button, related opportunities. Attribution: Subtle footer with hyperlink - 'Source: 80K Hours' with hyperlink to original listing."

1. Create `src/components/opportunities/opportunity-detail.tsx`:

```typescript
import { Link } from "@tanstack/react-router";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  MapPin,
  Building2,
  Clock,
  Banknote,
  ExternalLink,
  Calendar,
  Briefcase,
} from "lucide-react";
import { formatDistanceToNow, format } from "date-fns";
import { Id } from "../../../convex/_generated/dataModel";

type Opportunity = {
  _id: Id<"opportunities">;
  title: string;
  organization: string;
  organizationLogoUrl?: string;
  location: string;
  isRemote: boolean;
  roleType: string;
  experienceLevel?: string;
  description: string;
  requirements?: string[];
  salaryRange?: string;
  deadline?: number;
  sourceUrl: string;
  source: "80k_hours" | "aisafety_com" | "manual";
  alternateSources?: { sourceId: string; source: string; sourceUrl: string }[];
  lastVerified: number;
  createdAt: number;
};

const SOURCE_NAMES: Record<string, string> = {
  "80k_hours": "80,000 Hours",
  aisafety_com: "aisafety.com",
  manual: "Direct submission",
};

const ROLE_TYPE_COLORS: Record<string, string> = {
  research: "bg-purple-100 text-purple-800",
  engineering: "bg-blue-100 text-blue-800",
  operations: "bg-green-100 text-green-800",
  policy: "bg-amber-100 text-amber-800",
  other: "bg-slate-100 text-slate-800",
};

export function OpportunityDetail({ opportunity }: { opportunity: Opportunity }) {
  const roleColorClass = ROLE_TYPE_COLORS[opportunity.roleType] || ROLE_TYPE_COLORS.other;

  return (
    <div className="max-w-4xl mx-auto">
      {/* Header */}
      <div className="bg-white rounded-lg border border-slate-200 p-6 mb-6">
        <div className="flex gap-4">
          {opportunity.organizationLogoUrl ? (
            <img
              src={opportunity.organizationLogoUrl}
              alt={`${opportunity.organization} logo`}
              className="w-16 h-16 rounded-lg object-contain bg-slate-50"
            />
          ) : (
            <div className="w-16 h-16 rounded-lg bg-slate-100 flex items-center justify-center flex-shrink-0">
              <Building2 className="w-8 h-8 text-slate-400" />
            </div>
          )}

          <div className="flex-1">
            <div className="flex items-start justify-between gap-4">
              <div>
                <h1 className="text-2xl font-bold text-slate-900">
                  {opportunity.title}
                </h1>
                <p className="text-lg text-slate-600 mt-1">
                  {opportunity.organization}
                </p>
              </div>
              <Badge className={`${roleColorClass} capitalize`}>
                {opportunity.roleType}
              </Badge>
            </div>

            <div className="flex flex-wrap items-center gap-4 mt-4 text-slate-600">
              <span className="flex items-center gap-1.5">
                <MapPin className="w-4 h-4" />
                {opportunity.location}
                {opportunity.isRemote && (
                  <Badge variant="outline" className="ml-1">Remote</Badge>
                )}
              </span>

              {opportunity.experienceLevel && (
                <span className="flex items-center gap-1.5">
                  <Briefcase className="w-4 h-4" />
                  {opportunity.experienceLevel.charAt(0).toUpperCase() +
                    opportunity.experienceLevel.slice(1)}{" "}
                  level
                </span>
              )}

              {opportunity.salaryRange && (
                <span className="flex items-center gap-1.5">
                  <Banknote className="w-4 h-4" />
                  {opportunity.salaryRange}
                </span>
              )}

              {opportunity.deadline && (
                <span className="flex items-center gap-1.5">
                  <Clock className="w-4 h-4" />
                  Deadline: {format(opportunity.deadline, "MMM d, yyyy")}
                </span>
              )}
            </div>

            <div className="mt-6">
              <Button asChild size="lg">
                <a
                  href={opportunity.sourceUrl}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  Apply Now
                  <ExternalLink className="w-4 h-4 ml-2" />
                </a>
              </Button>
            </div>
          </div>
        </div>
      </div>

      {/* Description */}
      <Card className="mb-6">
        <CardHeader>
          <CardTitle>About This Role</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="prose prose-slate max-w-none">
            {opportunity.description.split("\n").map((paragraph, i) => (
              <p key={i}>{paragraph}</p>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Requirements */}
      {opportunity.requirements && opportunity.requirements.length > 0 && (
        <Card className="mb-6">
          <CardHeader>
            <CardTitle>Requirements</CardTitle>
          </CardHeader>
          <CardContent>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              {opportunity.requirements.map((req, i) => (
                <li key={i}>{req}</li>
              ))}
            </ul>
          </CardContent>
        </Card>
      )}

      {/* Source attribution (OPPS-06 freshness + source) */}
      <div className="text-sm text-slate-500 border-t border-slate-200 pt-4 mt-6">
        <div className="flex flex-wrap items-center justify-between gap-4">
          <div className="flex items-center gap-1">
            <Calendar className="w-4 h-4" />
            <span>
              Last verified:{" "}
              {formatDistanceToNow(opportunity.lastVerified, { addSuffix: true })}
            </span>
          </div>

          <div className="flex items-center gap-2">
            <span>Source:</span>
            <a
              href={opportunity.sourceUrl}
              target="_blank"
              rel="noopener noreferrer"
              className="text-blue-600 hover:underline"
            >
              {SOURCE_NAMES[opportunity.source] || opportunity.source}
            </a>

            {opportunity.alternateSources && opportunity.alternateSources.length > 0 && (
              <>
                <span className="text-slate-400">â€¢</span>
                <span>Also on:</span>
                {opportunity.alternateSources.map((alt, i) => (
                  <a
                    key={i}
                    href={alt.sourceUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-blue-600 hover:underline"
                  >
                    {SOURCE_NAMES[alt.source] || alt.source}
                  </a>
                ))}
              </>
            )}
          </div>
        </div>
      </div>

      {/* Back link */}
      <div className="mt-8">
        <Button variant="outline" asChild>
          <Link to="/opportunities">Back to all opportunities</Link>
        </Button>
      </div>
    </div>
  );
}
```

2. Create detail page at `src/routes/opportunities/$id.tsx`:

```typescript
import { createFileRoute, Link } from "@tanstack/react-router";
import { useQuery } from "convex/react";
import { api } from "../../../convex/_generated/api";
import { OpportunityDetail } from "@/components/opportunities/opportunity-detail";
import { Id } from "../../../convex/_generated/dataModel";
import { Button } from "@/components/ui/button";

export const Route = createFileRoute("/opportunities/$id")({
  component: OpportunityPage,
});

function OpportunityPage() {
  const { id } = Route.useParams();
  const opportunity = useQuery(api.opportunities.get, {
    id: id as Id<"opportunities">,
  });

  if (opportunity === undefined) {
    return (
      <main className="container mx-auto px-4 py-8">
        <div className="max-w-4xl mx-auto">
          <div className="animate-pulse space-y-4">
            <div className="h-32 bg-slate-100 rounded-lg" />
            <div className="h-64 bg-slate-100 rounded-lg" />
          </div>
        </div>
      </main>
    );
  }

  if (opportunity === null) {
    return (
      <main className="container mx-auto px-4 py-8">
        <div className="max-w-4xl mx-auto text-center py-12">
          <h1 className="text-2xl font-bold text-slate-900 mb-4">
            Opportunity Not Found
          </h1>
          <p className="text-slate-600 mb-6">
            This opportunity may have been removed or the link is incorrect.
          </p>
          <Button asChild>
            <Link to="/opportunities">Browse All Opportunities</Link>
          </Button>
        </div>
      </main>
    );
  }

  return (
    <main className="container mx-auto px-4 py-8">
      <OpportunityDetail opportunity={opportunity} />
    </main>
  );
}
```
  </action>
  <verify>
Click any opportunity card - navigates to /opportunities/[id].
Detail page shows all information (title, org, description, requirements).
Apply button opens source URL in new tab.
Freshness indicator shows "Last verified: X ago".
Source attribution shows origin with link.
  </verify>
  <done>Detail page with full information, apply button, and source attribution.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 5: Verify browsing experience</name>
  <what-built>Complete opportunity browsing flow: list view with filters, detail pages, URL-synced state, freshness indicators.</what-built>
  <how-to-verify>
1. Visit http://localhost:5173/opportunities (TanStack Start default port)

2. If no opportunities exist yet, create a test one via /admin/opportunities/new:
   - Title: "Test Research Engineer"
   - Organization: "Test Org"
   - Location: "San Francisco"
   - Remote: checked
   - Role Type: Research
   - Description: "This is a test opportunity"
   - Source URL: https://example.com

3. Verify list view:
   - Card shows logo placeholder, title, organization, location, role badge
   - Freshness indicator shows "Last verified: X ago"

4. Test filters (TanStack Router search params):
   - Select "Research" from role dropdown - URL updates to ?role=research
   - Select "Remote Only" - URL updates to ?role=research&location=remote
   - Copy URL and open in new tab - same filters applied
   - Click "Clear" - filters reset

5. Test search:
   - Type "research" in search box - URL updates to ?q=research
   - Results filter based on search

6. Click opportunity card (TanStack Router Link with params):
   - Navigates to /opportunities/$id (dynamic route)
   - Full detail view with description, requirements (if any)
   - "Apply Now" button opens source URL
   - Source attribution at bottom with link
   - "Back to all opportunities" link works (TanStack Router Link)

7. Verify aesthetic (Lyra style):
   - Sharp, geometric feel with boxy edges
   - Mono fonts for titles (technical precision)
   - Card-based layout with subtle hover lift
   - Light theme with coral accent
   - Staggered animations on page load
  </how-to-verify>
  <resume-signal>Type "approved" if browsing experience works correctly, or describe issues to fix.</resume-signal>
</task>

</tasks>

<verification>
Full verification checklist:

```bash
# All component files exist
ls src/components/opportunities/

# Route files exist (TanStack Start file-based routing)
ls src/routes/opportunities/
# Should contain: index.tsx, $id.tsx

# Pathless layout route exists
ls src/routes/_public.tsx
```

Manual verification:
- [ ] /opportunities page loads with filter bar
- [ ] Filters update URL parameters (TanStack Router search params)
- [ ] Shareable URLs work (copy URL, paste in new tab)
- [ ] Search filters results
- [ ] Clicking card navigates to detail (Link with params)
- [ ] Detail page shows all information
- [ ] Apply button works
- [ ] Freshness indicator visible (OPPS-06)
- [ ] Source attribution present
- [ ] Lyra aesthetic: sharp edges, mono fonts, coral accent
- [ ] Motion: staggered card reveals, hover lifts
</verification>

<success_criteria>
- User can view opportunity listings (OPPS-01)
- User can search and filter by role type, location, remote status (OPPS-02)
- Filter state reflected in URL for shareable links
- Detail page shows complete opportunity information
- Freshness indicator ("Last verified: X") present (OPPS-06)
- Source attribution with link to original listing
- Lyra aesthetic: boxy/sharp edges, mono fonts, light theme with coral accent
- Tasteful motion: staggered reveals on load, hover transforms
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-opportunities/01-04-SUMMARY.md`
</output>
