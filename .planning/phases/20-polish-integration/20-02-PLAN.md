---
phase: 20-polish-integration
plan: 02
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - src/styles/app.css
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
  - src/components/ui/checkbox.tsx
  - src/components/ui/switch.tsx
  - src/components/ui/tabs.tsx
  - src/components/ui/select.tsx
  - src/components/ui/textarea.tsx
  - src/components/ui/empty.tsx
autonomous: true

must_haves:
  truths:
    - "All interactive elements show coral focus ring on keyboard navigation"
    - "Focus ring has subtle glow effect matching shadow aesthetic"
    - "Empty states display with warm styling and playful copy"
    - "Empty state illustrations use coral color"
  artifacts:
    - path: "src/styles/app.css"
      provides: "Focus ring CSS custom property"
      contains: "--focus-ring"
    - path: "src/components/ui/empty.tsx"
      provides: "Enhanced Empty component with variants and illustrations"
      exports: ["Empty"]
  key_links:
    - from: "src/components/ui/button.tsx"
      to: "--ring"
      via: "focus-visible:ring-ring"
      pattern: "focus-visible:ring"
    - from: "src/components/ui/empty.tsx"
      to: "coral color"
      via: "text-coral-400"
      pattern: "text-coral"
---

<objective>
Implement consistent coral focus states across all interactive elements and enhance empty states with warm visual treatment.

Purpose: Ensure keyboard users see clear coral focus indicators that match the warm aesthetic. Make empty states feel friendly and on-brand rather than cold and generic.

Output: Coral focus rings on all interactive components, enhanced Empty component with SVG illustrations and playful copy.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-polish-integration/20-CONTEXT.md
@.planning/phases/20-polish-integration/20-RESEARCH.md
@src/styles/app.css
@src/components/ui/button.tsx
@src/components/ui/input.tsx
@src/components/ui/checkbox.tsx
@src/components/ui/switch.tsx
@src/components/ui/tabs.tsx
@src/components/ui/empty.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update focus states across components</name>
  <files>
    src/styles/app.css
    src/components/ui/button.tsx
    src/components/ui/input.tsx
    src/components/ui/checkbox.tsx
    src/components/ui/switch.tsx
    src/components/ui/tabs.tsx
    src/components/ui/textarea.tsx
  </files>
  <action>
The current shadcn pattern uses `focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`. This produces a gray ring in dark mode because --ring changes. We'll keep using the semantic --ring token (which is already coral) but ensure consistency.

**Verify current state:**
The --ring token is already coral in both light and dark mode (Plan 01 set `--ring: oklch(0.70 0.16 30)` in .dark). The existing focus-visible pattern should work, but let's audit and ensure consistency.

**For each component, verify the focus-visible pattern is:**
```
focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]
```

Check these files and update if needed:

1. **button.tsx** (line 9): Already has the pattern. VERIFY it's correct.

2. **input.tsx** (line 12): Already has the pattern. VERIFY it's correct.

3. **checkbox.tsx** (line 15): Already has the pattern. VERIFY it's correct.

4. **switch.tsx** (line 16): Already has the pattern. VERIFY it's correct.

5. **tabs.tsx** (TabsTrigger, line 43): Has `focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring ... focus-visible:ring-[3px] focus-visible:outline-1`. VERIFY it's correct.

6. **textarea.tsx**: Check if it exists and has the pattern.

7. **select.tsx**: Check SelectTrigger for focus pattern.

**If any component is missing or has incorrect focus styling:**
- Add or fix to match the standard pattern
- Ensure outline-none is present to prevent browser default

**In app.css**, ensure the .dark --ring token is coral (should already be from Plan 01):
```css
.dark {
  --ring: oklch(0.70 0.16 30);
}
```

Also verify the @layer base rule for outline:
```css
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
}
```

The existing pattern with --ring should provide coral focus in both modes.
  </action>
  <verify>
1. `bun run dev`
2. Tab through the app with keyboard
3. Verify buttons, inputs, checkboxes, switches, tabs all show coral ring
4. Toggle to dark mode
5. Tab through again - focus ring should still be coral (not gray)
  </verify>
  <done>All interactive elements show consistent coral focus ring in both light and dark modes.</done>
</task>

<task type="auto">
  <name>Task 2: Enhance Empty component</name>
  <files>src/components/ui/empty.tsx</files>
  <action>
Rewrite the Empty component to provide warm styling with SVG illustrations and playful copy.

Replace the entire contents of empty.tsx with:

```tsx
import * as React from "react"
import { cn } from "~/lib/utils"

type EmptyVariant = 'no-data' | 'no-results' | 'error' | 'success'

interface EmptyProps extends React.ComponentProps<"div"> {
  variant?: EmptyVariant
  title?: string
  description?: string
  action?: React.ReactNode
}

const defaultTitles: Record<EmptyVariant, string> = {
  'no-data': "Nothing here yet",
  'no-results': "No matches found",
  'error': "Something went wrong",
  'success': "All done!"
}

const defaultDescriptions: Record<EmptyVariant, string> = {
  'no-data': "Great things take time. Check back soon!",
  'no-results': "Try adjusting your filters or search terms.",
  'error': "We're looking into it. Please try again.",
  'success': "You're all caught up."
}

function Empty({
  variant = 'no-data',
  title,
  description,
  action,
  className,
  children,
  ...props
}: EmptyProps) {
  // If children provided, use compound component pattern (backward compat)
  if (children) {
    return (
      <div
        className={cn(
          "flex flex-col items-center justify-center text-center",
          className
        )}
        {...props}
      >
        {children}
      </div>
    )
  }

  // New variant-based API
  return (
    <div
      className={cn(
        "flex flex-col items-center justify-center py-12 text-center",
        className
      )}
      {...props}
    >
      <div className="mb-6 text-coral-400">
        <EmptyIllustration variant={variant} />
      </div>
      <h3 className="font-display text-lg font-medium text-foreground">
        {title || defaultTitles[variant]}
      </h3>
      <p className="mt-2 max-w-sm text-sm text-muted-foreground">
        {description || defaultDescriptions[variant]}
      </p>
      {action && <div className="mt-6">{action}</div>}
    </div>
  )
}

// SVG illustrations using currentColor for theme adaptation
function EmptyIllustration({ variant }: { variant: EmptyVariant }) {
  switch (variant) {
    case 'no-data':
      return (
        <svg
          viewBox="0 0 120 120"
          className="h-24 w-24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          {/* Inbox/folder illustration */}
          <rect x="20" y="45" width="80" height="55" rx="4" />
          <path d="M20 60 L60 80 L100 60" />
          <circle cx="60" cy="30" r="10" />
          <path d="M56 30 L64 30" />
        </svg>
      )
    case 'no-results':
      return (
        <svg
          viewBox="0 0 120 120"
          className="h-24 w-24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          {/* Magnifying glass with question mark */}
          <circle cx="52" cy="52" r="28" />
          <path d="M72 72 L95 95" strokeWidth="4" />
          <path d="M45 42 Q45 35 52 35 Q59 35 59 42 Q59 48 52 50 L52 55" />
          <circle cx="52" cy="62" r="2" fill="currentColor" />
        </svg>
      )
    case 'error':
      return (
        <svg
          viewBox="0 0 120 120"
          className="h-24 w-24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          {/* Warning triangle */}
          <path d="M60 20 L100 95 L20 95 Z" />
          <path d="M60 45 L60 65" strokeWidth="3" />
          <circle cx="60" cy="78" r="3" fill="currentColor" />
        </svg>
      )
    case 'success':
      return (
        <svg
          viewBox="0 0 120 120"
          className="h-24 w-24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          {/* Checkmark in circle */}
          <circle cx="60" cy="60" r="40" />
          <path d="M40 60 L55 75 L80 45" strokeWidth="3" />
        </svg>
      )
  }
}

// Compound components for backward compatibility
function EmptyIcon({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div className={cn("mb-4 text-coral-300", className)} {...props}>
      <svg
        viewBox="0 0 120 120"
        className="h-12 w-12"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      >
        <rect x="20" y="45" width="80" height="55" rx="4" />
        <path d="M20 60 L60 80 L100 60" />
        <circle cx="60" cy="30" r="10" />
        <path d="M56 30 L64 30" />
      </svg>
    </div>
  )
}

function EmptyTitle({ className, ...props }: React.ComponentProps<"h3">) {
  return (
    <h3
      className={cn("text-lg font-semibold text-foreground font-display mb-1", className)}
      {...props}
    />
  )
}

function EmptyDescription({ className, ...props }: React.ComponentProps<"p">) {
  return (
    <p className={cn("text-sm text-muted-foreground max-w-sm", className)} {...props} />
  )
}

Empty.Icon = EmptyIcon
Empty.Title = EmptyTitle
Empty.Description = EmptyDescription

export { Empty }
export type { EmptyVariant }
```

Key changes from original:
1. Added variant prop for common empty state types
2. SVG illustrations using currentColor (adapts to theme)
3. Warm coral color (text-coral-400) for illustrations
4. Playful default copy ("Nothing here yet", "Great things take time")
5. font-display for titles (Lora)
6. Preserved compound component API (Empty.Icon, Empty.Title, Empty.Description) for backward compatibility
7. Action slot for optional CTA button
  </action>
  <verify>
1. `bun run lint` - TypeScript compiles
2. Check /opportunities with no data - verify warm styling
3. Test each variant:
   - `<Empty variant="no-data" />`
   - `<Empty variant="no-results" />`
   - `<Empty variant="error" />`
   - `<Empty variant="success" />`
4. Verify backward compat: Existing usage with compound components still works
5. Toggle dark mode - illustrations should adapt (coral remains visible)
  </verify>
  <done>Empty component has warm styling, SVG illustrations in coral, playful copy, and backward compatibility.</done>
</task>

</tasks>

<verification>
1. **Focus states**: Tab through any page - buttons, inputs, checkboxes show coral ring
2. **Dark mode focus**: In dark mode, focus ring is still coral (not gray)
3. **Empty styling**: Go to /opportunities with no results - see warm illustration
4. **Empty copy**: "Nothing here yet" / "Great things take time" visible
5. **Empty in dark mode**: Illustration remains visible with warm coral
6. **Backward compat**: Existing Empty usages with compound API still work
</verification>

<success_criteria>
- Keyboard focus shows coral ring on all interactive elements
- Focus ring visible in both light and dark modes
- Empty component shows SVG illustration in coral
- Default titles/descriptions are friendly ("Nothing here yet")
- Existing Empty.Icon/Empty.Title/Empty.Description usage unbroken
</success_criteria>

<output>
After completion, create `.planning/phases/20-polish-integration/20-02-SUMMARY.md`
</output>
