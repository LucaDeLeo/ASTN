---
phase: 21-responsive-foundation
plan: 05
type: execute
wave: 3
depends_on: [21-02, 21-03, 21-04]
files_modified:
  - src/components/ui/button.tsx
  - src/styles/app.css
  - src/routes/index.tsx
  - src/routes/login.tsx
  - src/routes/matches/$id.tsx
  - src/routes/opportunities/$id.tsx
  - src/routes/profile/index.tsx
  - src/routes/org/$slug/index.tsx
autonomous: false

must_haves:
  truths:
    - "All interactive elements have 44x44px minimum touch targets on mobile"
    - "No horizontal scroll on any route at 375px viewport"
    - "Layout transitions are smooth when resizing"
  artifacts:
    - path: "src/styles/app.css"
      provides: "Touch target and transition utilities"
      contains: "min-h-11"
  key_links:
    - from: "all routes"
      to: "375px viewport"
      via: "responsive layouts"
      pattern: "no overflow-x"
---

<objective>
Complete touch target audit and fix horizontal scroll issues across all routes.

Purpose: This final plan ensures WCAG 2.5.8 compliance for touch targets (44px minimum) and verifies no route has horizontal scroll at 375px viewport. It also adds smooth layout transitions for a polished responsive experience.

Output: All routes pass mobile usability checks with proper touch targets and no overflow.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-responsive-foundation/21-CONTEXT.md
@.planning/phases/21-responsive-foundation/21-RESEARCH.md

@src/components/ui/button.tsx
@src/styles/app.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add touch target utilities and audit buttons</name>
  <files>src/components/ui/button.tsx, src/styles/app.css</files>
  <action>
Add mobile touch target utilities and ensure Button component has proper sizing:

1. In app.css, add utility classes:
```css
/* Touch target utilities for mobile */
@media (max-width: 767px) {
  .touch-target {
    min-height: 2.75rem; /* 44px */
    min-width: 2.75rem;
  }
}

/* Smooth layout transitions */
.transition-layout {
  transition: all 200ms var(--ease-gentle, ease-out);
}
```

2. Review Button component variants and ensure icon sizes have proper touch targets:
- `size: "icon"` is 36px (size-9) - needs min-h-11 min-w-11 on mobile
- `size: "icon-sm"` is 32px (size-8) - needs min-h-11 min-w-11 on mobile

Add mobile-specific touch target sizing to button variants in button.tsx. Consider adding a responsive approach:

Option A (CSS utility approach - add to app.css):
```css
/* Ensure icon buttons have touch targets on mobile */
@media (max-width: 767px) {
  [data-slot="button"][data-size="icon"],
  [data-slot="button"][data-size="icon-sm"],
  [data-slot="button"][data-size="icon-lg"] {
    min-height: 2.75rem;
    min-width: 2.75rem;
  }
}
```

Option B (variant approach - modify buttonVariants in button.tsx):
This is more explicit but more invasive. CSS approach is cleaner.

Go with Option A - add the CSS rule to app.css to automatically size all icon buttons on mobile.

Also add the scrollbar-hide utility if not already present:
```css
/* Hide scrollbar for horizontal scroll areas */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
```
  </action>
  <verify>
1. Check that icon buttons render at 44px on mobile viewport
2. CSS compiles without errors
  </verify>
  <done>Touch target utilities added, icon buttons have 44px minimum on mobile</done>
</task>

<task type="auto">
  <name>Task 2: Add layout transition smoothing</name>
  <files>src/styles/app.css</files>
  <action>
Add smooth transitions for responsive layout changes. The project already has duration tokens (--duration-normal, --ease-gentle). Use them for layout transitions.

Add to app.css:
```css
/* Responsive layout transitions */
@media (prefers-reduced-motion: no-preference) {
  .container,
  [class*="flex-col md:flex-row"],
  [class*="md:flex-row"],
  [class*="md:grid-cols"] {
    transition:
      grid-template-columns 200ms ease-out,
      flex-direction 200ms ease-out,
      gap 200ms ease-out;
  }
}
```

This adds subtle animations when layouts shift between breakpoints (window resize, orientation change). The `prefers-reduced-motion` query respects user accessibility preferences.

Note: Most responsive changes are instant (via display: none) which don't animate. This helps with the few that do have smooth transitions.
  </action>
  <verify>
Resize window between mobile and desktop - layout changes should feel smooth, not jarring
  </verify>
  <done>Layout transitions use smooth animations respecting motion preferences</done>
</task>

<task type="auto">
  <name>Task 3: Audit all routes for horizontal scroll</name>
  <files>Multiple routes</files>
  <action>
Systematically test each route at 375px viewport width and fix any horizontal overflow issues.

Routes to audit:
1. `/` - Home/landing
2. `/login` - Authentication
3. `/profile` - Profile view
4. `/profile/edit` - Profile wizard
5. `/opportunities` - Browse opportunities (should be fixed by Plan 02)
6. `/opportunities/$id` - Opportunity detail
7. `/matches` - Match list
8. `/matches/$id` - Match detail
9. `/settings` - Settings
10. `/orgs` - Organizations list
11. `/org/$slug` - Organization page
12. `/org/$slug/events` - Organization events
13. `/org/$slug/join` - Join organization
14. `/org/$slug/admin` - Admin dashboard
15. `/org/$slug/admin/members` - Member management (should be fixed by Plan 04)
16. `/org/$slug/admin/programs` - Programs management

For each route, at 375px viewport:
1. Check for horizontal scroll
2. Identify any fixed-width elements causing overflow
3. Fix by changing to responsive widths (w-full max-w-*, etc.)

Common fixes:
- `w-64` -> `w-full md:w-64`
- `max-w-lg` -> `max-w-[calc(100%-2rem)] sm:max-w-lg`
- Fixed pixel widths -> percentage or viewport-relative
- Long text without truncate -> add `truncate` or `break-words`

Focus fixes on:
- src/routes/index.tsx (home page)
- src/routes/login.tsx (login form)
- src/routes/matches/$id.tsx (match detail)
- src/routes/opportunities/$id.tsx (opportunity detail)
- src/routes/profile/index.tsx (profile view)
- src/routes/org/$slug/index.tsx (org page)

Apply mobile-first fixes as needed. Document any significant changes.
  </action>
  <verify>
Test each route at 375px:
- No horizontal scrollbar visible
- Content fits within viewport
- Text is readable (no extreme truncation)
  </verify>
  <done>All routes display without horizontal scroll at 375px viewport</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Responsive foundation for all ASTN routes:
- Skeleton loading components
- Responsive filters (chips + sheet pattern)
- Profile wizard mobile layout
- Admin tables as mobile cards
- Touch target sizing (44px minimum)
- Layout transition smoothing
- Horizontal scroll fixes across all routes
  </what-built>
  <how-to-verify>
1. Start dev server: `bun run dev`
2. Open browser DevTools and set viewport to 375px width (iPhone SE size)
3. Test each of these routes:
   - `/` - Home loads, no horizontal scroll
   - `/login` - Form usable, buttons tappable
   - `/opportunities` - Filter button opens sheet, cards display, skeleton on load
   - `/opportunities/{id}` - Detail page fits, no overflow
   - `/profile/edit` - Wizard steps horizontal, form usable
   - `/matches` - Cards display properly
   - `/org/{slug}/admin/members` - Card list instead of table, filters work
4. Tap various buttons - all should respond (no missed taps due to small targets)
5. Resize window between mobile and desktop - transitions should be smooth
6. Check for any horizontal scroll on any page

Expected: All routes work on 375px viewport, all buttons tappable, no horizontal scroll.
  </how-to-verify>
  <resume-signal>
Type "approved" if all routes pass mobile testing, or describe specific issues found.
  </resume-signal>
</task>

</tasks>

<verification>
After completing all tasks:
1. Run `bun run lint` - should pass
2. Run `bun run build` - should succeed
3. Human verification of mobile experience
</verification>

<success_criteria>
- All interactive elements have 44x44px touch targets on mobile
- No horizontal scroll on any route at 375px
- Layout transitions are smooth
- Human verification passes
- Phase 21 requirements RESP-01 through RESP-07 complete
</success_criteria>

<output>
After completion, create `.planning/phases/21-responsive-foundation/21-05-SUMMARY.md`
</output>
