---
phase: 22-mobile-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/__root.tsx
  - public/site.webmanifest
  - src/styles/app.css
autonomous: true

must_haves:
  truths:
    - 'App requests full-screen viewport with safe area access'
    - 'PWA manifest has proper name and standalone display'
    - 'Safe area CSS variables are available for layout components'
  artifacts:
    - path: 'src/routes/__root.tsx'
      provides: 'viewport-fit=cover meta tag, apple-mobile-web-app meta tags'
      contains: 'viewport-fit=cover'
    - path: 'public/site.webmanifest'
      provides: 'PWA configuration with name and start_url'
      contains: 'AI Safety Talent Network'
    - path: 'src/styles/app.css'
      provides: 'Safe area CSS custom properties and utility classes'
      contains: 'safe-area-inset-bottom'
  key_links:
    - from: 'src/routes/__root.tsx'
      to: 'browser viewport API'
      via: 'viewport meta tag with viewport-fit=cover'
      pattern: 'viewport-fit=cover'
---

<objective>
Update PWA manifest and viewport meta for mobile-first experience with safe area support.

Purpose: Enable the browser to report safe area insets for notched devices (iPhone X+, Dynamic Island) and configure the app for standalone PWA mode.

Output: Updated \_\_root.tsx with viewport-fit=cover, PWA manifest with proper name/short_name, and safe area CSS utilities ready for use by tab bar and layout components.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-mobile-navigation/22-CONTEXT.md
@.planning/phases/22-mobile-navigation/22-RESEARCH.md
@src/routes/__root.tsx
@public/site.webmanifest
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update viewport meta and add PWA meta tags</name>
  <files>src/routes/__root.tsx</files>
  <action>
Update the viewport meta tag in the head() function to include viewport-fit=cover for safe area access:
- Change viewport content from `width=device-width, initial-scale=1` to `width=device-width, initial-scale=1.0, viewport-fit=cover`
- Add apple-mobile-web-app-capable meta tag with content "yes"
- Add apple-mobile-web-app-status-bar-style meta tag with content "default" (follows system light/dark)

These meta tags enable:

1. Safe area inset reporting via CSS env() on notched devices
2. Full-screen standalone mode when added to home screen
3. Status bar that follows system theme automatically
   </action>
   <verify>Read the modified file and confirm the three meta tags are present with correct content values.</verify>
   <done>\_\_root.tsx contains viewport-fit=cover, apple-mobile-web-app-capable=yes, and apple-mobile-web-app-status-bar-style=default</done>
   </task>

<task type="auto">
  <name>Task 2: Update PWA manifest with app name</name>
  <files>public/site.webmanifest</files>
  <action>
Update the PWA manifest with proper app identification:
- Set "name" to "AI Safety Talent Network"
- Set "short_name" to "ASTN"
- Keep existing display: "standalone"
- Add "start_url": "/"
- Keep existing icons, theme_color, and background_color

The manifest already has icons and display mode set correctly. This task adds the missing name fields required for proper PWA installation prompts.
</action>
<verify>Read site.webmanifest and confirm name="AI Safety Talent Network", short_name="ASTN", start_url="/" are present.</verify>
<done>PWA manifest has name, short_name, and start_url configured for app store-like installation</done>
</task>

<task type="auto">
  <name>Task 3: Add safe area CSS utilities to app.css</name>
  <files>src/styles/app.css</files>
  <action>
Add CSS custom properties and utility classes for safe area handling at the end of app.css:

```css
/* Safe area handling for mobile navigation */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --tab-bar-height: 4rem;
}

/* Content padding for bottom tab bar */
.pb-safe-bottom {
  padding-bottom: calc(var(--tab-bar-height) + var(--safe-area-inset-bottom));
}

/* Tab bar container - extends to screen edge */
.tab-bar-safe {
  padding-bottom: var(--safe-area-inset-bottom);
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}
```

These utilities will be used by:

- MobileShell main content area (pb-safe-bottom)
- BottomTabBar container (tab-bar-safe)
  </action>
  <verify>Read app.css and confirm the safe area CSS custom properties and utility classes are present.</verify>
  <done>Safe area utilities available as CSS classes and custom properties for mobile layout components</done>
  </task>

</tasks>

<verification>
1. `grep -q "viewport-fit=cover" src/routes/__root.tsx` - viewport meta updated
2. `grep -q "AI Safety Talent Network" public/site.webmanifest` - PWA name set
3. `grep -q "safe-area-inset-bottom" src/styles/app.css` - safe area utilities added
</verification>

<success_criteria>

- viewport-fit=cover enables safe area inset reporting on notched devices
- PWA manifest has proper name for installation prompts
- Safe area CSS utilities are ready for tab bar and layout components
  </success_criteria>

<output>
After completion, create `.planning/phases/22-mobile-navigation/22-01-SUMMARY.md`
</output>
