---
phase: 22-mobile-navigation
plan: 02
type: execute
wave: 2
depends_on: [22-01]
files_modified:
  - src/components/layout/bottom-tab-bar.tsx
autonomous: true

must_haves:
  truths:
    - 'User can switch between 5 primary destinations via bottom tab bar'
    - 'User sees active tab clearly indicated with brand color and bold label'
    - 'Tapping active tab scrolls to top'
  artifacts:
    - path: 'src/components/layout/bottom-tab-bar.tsx'
      provides: '5-tab navigation with Home, Opportunities, Matches, Profile, Settings'
      exports: ['BottomTabBar']
      min_lines: 60
  key_links:
    - from: 'src/components/layout/bottom-tab-bar.tsx'
      to: 'TanStack Router'
      via: 'Link component with activeProps'
      pattern: 'activeProps'
    - from: 'src/components/layout/bottom-tab-bar.tsx'
      to: 'safe area CSS'
      via: 'tab-bar-safe class'
      pattern: 'tab-bar-safe'
---

<objective>
Create BottomTabBar component with 5 navigation tabs and active state handling.

Purpose: Users navigate the app via persistent bottom tabs on mobile - the primary navigation pattern for mobile-first apps.

Output: A fixed-position bottom tab bar with Home, Opportunities, Matches, Profile, and Settings tabs, showing active state with brand color and supporting scroll-to-top on active tab re-tap.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-mobile-navigation/22-CONTEXT.md
@.planning/phases/22-mobile-navigation/22-RESEARCH.md
@.planning/phases/22-mobile-navigation/22-01-SUMMARY.md
@src/routes/admin/route.tsx (shows activeProps pattern)
@src/hooks/use-media-query.ts
@src/styles/app.css (has safe area utilities)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BottomTabBar component</name>
  <files>src/components/layout/bottom-tab-bar.tsx</files>
  <action>
Create the BottomTabBar component with 5 tabs. Use TanStack Router's Link with activeProps for active state styling.

Tab configuration per CONTEXT.md decision:
| Tab | Route | Icon (lucide-react) |
|-----|-------|---------------------|
| Home | `/` | Home |
| Opportunities | `/opportunities` | Briefcase |
| Matches | `/matches` | Target |
| Profile | `/profile` | User |
| Settings | `/settings` | Settings |

Implementation details:

1. Fixed position at bottom with z-50
2. Use `tab-bar-safe` class for safe area padding (from 22-01)
3. Background matches design system: bg-background with border-t
4. 5 equal-width flex items with column layout (icon above label)
5. Each tab is a Link component with:
   - activeProps={{ className: "text-primary font-semibold" }}
   - activeOptions={{ exact: true }} for Home, {{ exact: false }} for others
   - Default className: "text-muted-foreground"
   - Icons: size-5
   - Labels: text-xs
6. Add onClick handler that scrolls to top if already on that route:
   - Use useRouterState to get current pathname
   - In onClick handler:
     a. Check if pathname matches the tab's route (exact match for "/", startsWith for others)
     b. If ALREADY on route: call e.preventDefault() to stop Link navigation, then window.scrollTo({ top: 0, behavior: 'smooth' })
     c. If NOT on route: do nothing in onClick, let Link navigate normally
   - This pattern works because onClick fires before navigation
7. Touch target: min-h-[44px] for accessibility (per Phase 21 audit)

Do NOT use useIsLinkActive or similar - use Link's built-in activeProps which handles this.
</action>
<verify>

1. Read the file and confirm all 5 tabs are present with correct routes
2. Confirm activeProps is used for active state styling
3. Confirm tab-bar-safe class is applied for safe area handling
4. Confirm touch-target or min-h-[44px] for accessibility
   </verify>
   <done>BottomTabBar component exists with 5 tabs, active state styling via activeProps, safe area handling, and scroll-to-top on active tab tap</done>
   </task>

</tasks>

<verification>
1. File exists: `ls src/components/layout/bottom-tab-bar.tsx`
2. All 5 routes present: `grep -E "to=\"/(opportunities|matches|profile|settings)?\"" src/components/layout/bottom-tab-bar.tsx`
3. Active styling: `grep "activeProps" src/components/layout/bottom-tab-bar.tsx`
4. Safe area: `grep "tab-bar-safe" src/components/layout/bottom-tab-bar.tsx`
</verification>

<success_criteria>

- BottomTabBar renders 5 tabs with correct icons and labels
- Active tab shows brand color (text-primary) and bold label
- Tapping active tab scrolls to top of page
- Tab bar respects safe area insets on notched devices
  </success_criteria>

<output>
After completion, create `.planning/phases/22-mobile-navigation/22-02-SUMMARY.md`
</output>
