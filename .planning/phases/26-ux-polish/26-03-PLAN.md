---
phase: 26-ux-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/empty.tsx
  - src/routes/matches/index.tsx
  - src/routes/opportunities/index.tsx
autonomous: true

must_haves:
  truths:
    - "User sees contextual message when no matches exist (not generic 'nothing here')"
    - "User sees contextual message when no opportunities found (not generic)"
    - "User sees relevant call-to-action for each empty state context"
    - "Empty state illustrations vary based on context"
  artifacts:
    - path: "src/components/ui/empty.tsx"
      provides: "Empty component with contextual variants"
      exports: ["Empty", "EmptyVariant"]
    - path: "src/routes/matches/index.tsx"
      provides: "Matches page using 'no-matches' variant"
      contains: "no-matches"
    - path: "src/routes/opportunities/index.tsx"
      provides: "Opportunities page using 'no-results' variant"
      contains: "no-results"
  key_links:
    - from: "src/routes/matches/index.tsx"
      to: "src/components/ui/empty.tsx"
      via: "import { Empty }"
      pattern: 'variant="no-matches"'
---

<objective>
Expand the Empty component with contextual variants so empty states provide relevant messaging instead of generic "nothing here" messages.

Purpose: Guide users with context-appropriate messaging and actions when no data exists.
Output: Empty states for matches, opportunities, and events show tailored messages, illustrations, and CTAs.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/review/ux-review.md
@.planning/phases/26-ux-polish/26-RESEARCH.md

# Relevant source files
@src/components/ui/empty.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand Empty component with contextual variants</name>
  <files>src/components/ui/empty.tsx</files>
  <action>
Add new variants to the Empty component for common empty state contexts.

1. Expand the EmptyVariant type:
```typescript
type EmptyVariant =
  | 'no-data'           // Generic fallback
  | 'no-results'        // Search/filter returned nothing
  | 'error'             // Something went wrong
  | 'success'           // All done/completed
  | 'no-matches'        // No opportunity matches yet
  | 'no-opportunities'  // No opportunities available
  | 'no-events'         // No upcoming events
  | 'profile-incomplete' // Profile needs completion for matches
```

2. Add default titles for new variants:
```typescript
const defaultTitles: Record<EmptyVariant, string> = {
  'no-data': "Nothing here yet",
  'no-results': "No matches found",
  'error': "Something went wrong",
  'success': "All done!",
  'no-matches': "No matches yet",
  'no-opportunities': "No opportunities right now",
  'no-events': "No upcoming events",
  'profile-incomplete': "Complete your profile",
}
```

3. Add default descriptions:
```typescript
const defaultDescriptions: Record<EmptyVariant, string> = {
  'no-data': "Great things take time. Check back soon!",
  'no-results': "Try adjusting your filters or search terms.",
  'error': "We're looking into it. Please try again.",
  'success': "You're all caught up.",
  'no-matches': "Complete your profile and we'll find opportunities that fit your skills and goals.",
  'no-opportunities': "New AI Safety opportunities are added regularly. Check back soon!",
  'no-events': "No events are scheduled yet. Follow organizations to get notified.",
  'profile-incomplete': "Add your experience and goals to unlock personalized job matches.",
}
```

4. Add illustrations for new variants in EmptyIllustration:
```typescript
function EmptyIllustration({ variant }: { variant: EmptyVariant }) {
  switch (variant) {
    // ... existing cases ...

    case 'no-matches':
      return (
        <svg viewBox="0 0 120 120" className="h-24 w-24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          {/* Target with dotted line - waiting for match */}
          <circle cx="60" cy="60" r="35" />
          <circle cx="60" cy="60" r="20" />
          <circle cx="60" cy="60" r="5" fill="currentColor" />
          <path d="M95 95 L80 80" strokeWidth="3" strokeDasharray="4 4" />
        </svg>
      )

    case 'no-opportunities':
      return (
        <svg viewBox="0 0 120 120" className="h-24 w-24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          {/* Briefcase with clock - opportunities coming */}
          <rect x="25" y="45" width="70" height="50" rx="4" />
          <path d="M45 45 L45 35 Q45 30 50 30 L70 30 Q75 30 75 35 L75 45" />
          <circle cx="85" cy="35" r="15" fill="none" />
          <path d="M85 28 L85 35 L90 38" />
        </svg>
      )

    case 'no-events':
      return (
        <svg viewBox="0 0 120 120" className="h-24 w-24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          {/* Calendar with empty day */}
          <rect x="20" y="30" width="80" height="70" rx="4" />
          <path d="M20 50 L100 50" />
          <path d="M40 20 L40 40" strokeWidth="3" />
          <path d="M80 20 L80 40" strokeWidth="3" />
          <circle cx="60" cy="72" r="12" strokeDasharray="4 4" />
        </svg>
      )

    case 'profile-incomplete':
      return (
        <svg viewBox="0 0 120 120" className="h-24 w-24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
          {/* User with progress indicator */}
          <circle cx="60" cy="40" r="20" />
          <path d="M30 95 Q30 70 60 70 Q90 70 90 95" />
          <path d="M20 105 L100 105" strokeWidth="4" />
          <path d="M20 105 L60 105" strokeWidth="4" stroke="currentColor" opacity="0.4" />
        </svg>
      )
  }
}
```

5. Ensure the existing cases (no-data, no-results, error, success) remain unchanged for backward compatibility.
  </action>
  <verify>
1. Import and render Empty with each new variant in a test page or Storybook
2. Verify each variant shows unique illustration
3. Verify each variant shows appropriate title and description
4. Run `bun run lint` - no TypeScript errors
5. Run `bun run build` - no build errors
  </verify>
  <done>
- Empty component has 8 variants (4 existing + 4 new)
- Each variant has unique illustration, title, and description
- Backward compatible with existing usages
  </done>
</task>

<task type="auto">
  <name>Task 2: Update page usages to use contextual variants</name>
  <files>src/routes/matches/index.tsx, src/routes/opportunities/index.tsx</files>
  <action>
Update pages that show empty states to use the appropriate contextual variant.

1. In `src/routes/matches/index.tsx`:
Find where empty state is rendered (when no matches exist) and update to use 'no-matches' variant:
```tsx
<Empty
  variant="no-matches"
  action={
    <Button asChild>
      <Link to="/profile">Complete Profile</Link>
    </Button>
  }
/>
```

If the page shows empty state for different reasons (profile incomplete vs just no matches), use conditional variants:
```tsx
{!hasCompleteProfile ? (
  <Empty
    variant="profile-incomplete"
    action={
      <Button asChild>
        <Link to="/profile/edit">Complete Profile</Link>
      </Button>
    }
  />
) : (
  <Empty
    variant="no-matches"
    description="We're analyzing opportunities for your profile. Check back soon!"
  />
)}
```

2. In `src/routes/opportunities/index.tsx`:
Find where empty state is rendered and update based on context:
- If filters are applied and no results: use 'no-results'
- If no opportunities at all: use 'no-opportunities'

```tsx
{searchQuery || hasFilters ? (
  <Empty
    variant="no-results"
    action={
      <Button variant="outline" onClick={clearFilters}>
        Clear Filters
      </Button>
    }
  />
) : (
  <Empty variant="no-opportunities" />
)}
```

3. Check other pages that might use Empty component and consider updating:
- Events pages -> 'no-events'
- Organization pages -> 'no-data' (generic is fine here)
- Profile sections -> could use 'no-data' or specific variants

Note: Only update the most impactful pages in this task. Others can be done incrementally.
  </action>
  <verify>
1. Run the dev server
2. Navigate to /matches with incomplete profile - see 'profile-incomplete' variant
3. Navigate to /matches with complete profile but no matches - see 'no-matches' variant
4. Navigate to /opportunities with search that returns nothing - see 'no-results' variant
5. Verify CTAs work (Complete Profile, Clear Filters)
6. Run `bun run lint` - no errors
  </verify>
  <done>
- Matches page shows contextual empty state (no-matches or profile-incomplete)
- Opportunities page shows contextual empty state (no-results or no-opportunities)
- CTAs are appropriate for each context
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Empty states are visually distinct (different illustrations)
2. Messages are contextual and helpful
3. CTAs guide users to appropriate next action
4. No regression in existing empty state usages
5. `bun run lint` passes
6. `bun run build` succeeds
</verification>

<success_criteria>
1. Empty states show varied, contextual messaging (not generic)
2. Each context has appropriate illustration
3. CTAs guide users to relevant actions
4. Backward compatible - existing usages still work
</success_criteria>

<output>
After completion, create `.planning/phases/26-ux-polish/26-03-SUMMARY.md`
</output>
