---
phase: 29-performance-accessibility-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/settings/route.tsx
  - src/routes/profile/attendance.tsx
  - src/routes/login.tsx
  - src/routes/org/$slug/index.tsx
  - src/routes/org/$slug/join.tsx
  - src/routes/org/$slug/events.tsx
  - src/routes/org/$slug/admin/index.tsx
  - src/routes/org/$slug/admin/settings.tsx
  - src/routes/org/$slug/admin/members/index.tsx
  - src/routes/org/$slug/admin/members/$userId.tsx
  - src/routes/org/$slug/admin/programs/index.tsx
  - src/routes/org/$slug/admin/programs/$programId.tsx
  - src/routes/admin/index.tsx
  - src/routes/admin/opportunities/index.tsx
  - src/routes/admin/opportunities/new.tsx
  - src/routes/admin/opportunities/$id/edit.tsx
  - src/routes/settings/index.tsx
  - src/components/opportunities/opportunity-detail.tsx
  - src/components/profile/wizard/PostApplySummary.tsx
autonomous: true

must_haves:
  truths:
    - 'Settings page uses GradientBg instead of bg-slate-50'
    - 'Profile attendance page uses GradientBg instead of bg-slate-50'
    - 'Login page uses GradientBg'
    - 'All org public pages (index, join, events) use GradientBg'
    - 'All h1/h2/h3 page and section headings use font-display instead of font-bold'
    - 'Admin pages keep their dotGridStyle background (intentional differentiation)'
  artifacts:
    - path: 'src/routes/settings/route.tsx'
      provides: 'GradientBg wrapper for settings pages'
      contains: 'GradientBg'
    - path: 'src/routes/profile/attendance.tsx'
      provides: 'GradientBg wrapper for attendance page'
      contains: 'GradientBg'
    - path: 'src/routes/org/$slug/index.tsx'
      provides: 'GradientBg and font-display headings'
      contains: 'font-display'
  key_links:
    - from: 'src/routes/settings/route.tsx'
      to: 'src/components/layout/GradientBg.tsx'
      via: 'import and use as wrapper component'
      pattern: 'import.*GradientBg'
---

<objective>
Apply GradientBg warm background to all remaining user-facing pages and convert all page/section heading font classes from font-bold to font-display for visual consistency.

Purpose: Complete the v1.3 visual overhaul coverage so every page in the ASTN application has a consistent, polished look before the BAISH pilot launch.

Output: GradientBg on all user-facing pages, font-display on all page/section headings, admin pages retain dotGridStyle intentionally.
</objective>

<execution_context>
@/Users/luca/.claude/get-shit-done/workflows/execute-plan.md
@/Users/luca/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/29-performance-accessibility-polish/29-CONTEXT.md
@.planning/phases/29-performance-accessibility-polish/29-RESEARCH.md

@src/components/layout/GradientBg.tsx
@src/routes/settings/route.tsx
@src/routes/admin/route.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply GradientBg to remaining user-facing pages</name>
  <files>
    src/routes/settings/route.tsx
    src/routes/profile/attendance.tsx
    src/routes/login.tsx
    src/routes/org/$slug/index.tsx
    src/routes/org/$slug/join.tsx
    src/routes/org/$slug/events.tsx
  </files>
  <action>
Apply GradientBg to user-facing pages that currently lack it. The existing pattern in the codebase is: wrap page content with `<GradientBg>` which provides `min-h-screen` and the warm gradient background.

**Decision: Admin pages keep dotGridStyle.** Per the research open question and the fact that admin pages use `dotGridStyle` as an intentional admin-specific visual treatment, do NOT replace dotGridStyle with GradientBg on admin pages (`/admin/*` and `/org/$slug/admin/*`). Only apply GradientBg to user-facing pages.

**src/routes/settings/route.tsx** - Layout route (covers all settings pages):

- Import `{ GradientBg }` from `~/components/layout/GradientBg`
- Replace `<div className="min-h-screen bg-slate-50">` with `<GradientBg>` in both the mobile and desktop branches
- The GradientBg already provides `min-h-screen`, so remove `min-h-screen` from the wrapper
- Keep all child elements (AuthHeader, MobileShell, Outlet) unchanged

**src/routes/profile/attendance.tsx** - Individual page:

- Read the file first to understand its structure
- Import `{ GradientBg }` from `~/components/layout/GradientBg`
- If the page has a `bg-slate-50` wrapper, replace it with GradientBg
- If the page has no explicit background wrapper, wrap the content in GradientBg
- Be careful NOT to double-wrap if a parent layout route already provides GradientBg (check the profile route structure)

**src/routes/login.tsx** - Login page:

- Read the file first to understand its structure
- Import and wrap with GradientBg if not already present
- The login page is standalone (not under a layout route that has GradientBg)

**src/routes/org/$slug/index.tsx** - Org public page:

- Read the file first
- Import and wrap the main content with GradientBg
- Remove any existing `bg-*` background class from the outer wrapper

**src/routes/org/$slug/join.tsx** - Org join page:

- Read the file first
- Import and wrap with GradientBg

**src/routes/org/$slug/events.tsx** - Org events page:

- Read the file first
- Import and wrap with GradientBg

**Important anti-pattern to avoid:** Do NOT add GradientBg if a parent layout route already provides it. Check the route tree:

- `/settings` layout route (settings/route.tsx) wraps Outlet -- so adding GradientBg here covers all `/settings/*` pages. Do NOT also add it to settings/index.tsx.
- Check if `/org/$slug` has a layout route. If it does and it already has GradientBg, only add to that layout. If not, add to individual pages.
- Check if `/profile` has a layout route that covers attendance. If profile pages already have GradientBg via layout, skip attendance.

Use the `variant="radial"` (default) for consistency with existing GradientBg usage across the app.
</action>
<verify>
Run `bun run build` to ensure no import errors. Verify:

- `grep 'GradientBg' src/routes/settings/route.tsx` returns results
- `grep 'bg-slate-50' src/routes/settings/route.tsx` returns NO results (replaced)
- `grep 'GradientBg' src/routes/login.tsx` returns results (if page was modified)
  </verify>
  <done>
  All user-facing pages (settings, attendance, login, org public pages) use GradientBg warm background. Admin pages retain dotGridStyle. No double-wrapping occurs.
  </done>
  </task>

<task type="auto">
  <name>Task 2: Convert font-bold headings to font-display across all pages</name>
  <files>
    src/routes/profile/attendance.tsx
    src/routes/admin/opportunities/$id/edit.tsx
    src/routes/admin/opportunities/new.tsx
    src/routes/admin/opportunities/index.tsx
    src/routes/admin/index.tsx
    src/routes/org/$slug/admin/members/$userId.tsx
    src/routes/org/$slug/admin/index.tsx
    src/routes/org/$slug/events.tsx
    src/routes/org/$slug/admin/settings.tsx
    src/routes/org/$slug/join.tsx
    src/routes/settings/index.tsx
    src/routes/org/$slug/index.tsx
    src/routes/org/$slug/admin/programs/index.tsx
    src/routes/org/$slug/admin/programs/$programId.tsx
    src/routes/org/$slug/admin/members/index.tsx
    src/components/opportunities/opportunity-detail.tsx
    src/components/profile/wizard/PostApplySummary.tsx
  </files>
  <action>
Convert all page and section heading elements (h1, h2, h3) from `font-bold` to `font-display` class. The `font-display` class maps to the Space Grotesk display font per the v1.3 visual overhaul. This is a mechanical find-and-replace scoped to HEADING ELEMENTS ONLY.

**Scope rules (per CONTEXT.md and research pitfall #5):**

- ONLY convert `font-bold` to `font-display` on `<h1>`, `<h2>`, `<h3>` elements that serve as page titles or section headings
- Do NOT convert `font-bold` on:
  - Stat numbers (e.g., `<span className="text-3xl font-bold">42</span>`)
  - Badge text or inline bold text
  - Non-heading elements like `<p>`, `<span>`, `<div>` used for emphasis
  - Elements that are clearly data displays, not headings
- When converting, change `font-bold` to `font-display` (keep any other classes like `text-2xl`, `text-foreground`, etc.)

**Files with font-bold headings (37 occurrences across 17 files):**

Read each file and convert heading elements. Here are the known headings per file (from grep analysis):

1. `src/routes/profile/attendance.tsx` - 1 heading (h1)
2. `src/routes/admin/opportunities/$id/edit.tsx` - 1 heading (h1)
3. `src/routes/admin/opportunities/new.tsx` - 1 heading (h1)
4. `src/routes/admin/opportunities/index.tsx` - 1 heading (h1)
5. `src/routes/admin/index.tsx` - 1 heading (h1)
6. `src/routes/org/$slug/admin/members/$userId.tsx` - 3 headings (h1 for member name, error states)
7. `src/routes/org/$slug/admin/index.tsx` - 5 occurrences (but some may be stat labels -- only convert actual headings)
8. `src/routes/org/$slug/events.tsx` - 2 headings
9. `src/routes/org/$slug/admin/settings.tsx` - 3 headings
10. `src/routes/org/$slug/join.tsx` - 4 headings (different join states)
11. `src/routes/settings/index.tsx` - 1 heading
12. `src/routes/org/$slug/index.tsx` - 2 occurrences (check if h1 or other)
13. `src/routes/org/$slug/admin/programs/index.tsx` - 3 headings
14. `src/routes/org/$slug/admin/programs/$programId.tsx` - 4 headings
15. `src/routes/org/$slug/admin/members/index.tsx` - 3 headings
16. `src/components/opportunities/opportunity-detail.tsx` - 1 heading
17. `src/components/profile/wizard/PostApplySummary.tsx` - 1 heading

For each file: read the file, identify `<h1`, `<h2`, `<h3` elements with `font-bold` in their className, and replace `font-bold` with `font-display`. Leave non-heading elements untouched.

**Also add route-level aria-describedby** to any inline form inputs in org admin route files while touching them for font-display. These route files have inline forms:

- `src/routes/org/$slug/admin/programs/$programId.tsx` (9 form controls)
- `src/routes/org/$slug/admin/programs/index.tsx` (9 form controls via CreateProgramDialog import)
- `src/routes/org/$slug/admin/index.tsx` (8 form controls)
- `src/routes/org/$slug/admin/settings.tsx` (2 form controls)

For any inline form inputs (Input, Textarea, Select) in these route files that have visible error messages: add `useId()`, create error IDs, add `aria-describedby` and `aria-invalid`. If the form inputs are handled by imported components (like CreateProgramDialog), those are covered by plan 29-02 -- only add aria attributes to inputs defined directly in the route file.
</action>
<verify>
Run `bun run lint` and `bun run build` -- both should pass. Verify:

- `grep -r 'font-bold' src/routes/ --include='*.tsx' | grep '<h[123]'` returns 0 results (all heading font-bold converted)
- `grep -r 'font-display' src/routes/ --include='*.tsx' | wc -l` is significantly higher than before (~34 existing + ~35 new = ~69)
- Spot-check a few files: `grep 'font-display' src/routes/settings/index.tsx` returns results
  </verify>
  <done>
  All 37 font-bold headings across 17 files are converted to font-display. Non-heading font-bold elements (stats, badges, inline text) are preserved. Route files with inline forms have aria-describedby on their inputs.
  </done>
  </task>

</tasks>

<verification>
1. `bun run lint` passes with no errors
2. `bun run build` succeeds
3. GradientBg is used in settings/route.tsx, login.tsx, and org public page routes
4. No heading elements (`<h1`, `<h2`, `<h3`) have `font-bold` in route files -- all use `font-display`
5. Admin pages still use dotGridStyle (not replaced with GradientBg)
6. No double-wrapping of GradientBg (check that child pages don't wrap when parent layout already wraps)
</verification>

<success_criteria>

- GradientBg warm background appears on all user-facing pages (settings, attendance, login, org public)
- Admin pages retain intentional dotGridStyle differentiation
- All 35+ page/section headings use font-display class
- Non-heading font-bold elements are preserved (no visual regression on stats, badges, labels)
- All changes typecheck and lint cleanly
  </success_criteria>

<output>
After completion, create `.planning/phases/29-performance-accessibility-polish/29-03-SUMMARY.md`
</output>
